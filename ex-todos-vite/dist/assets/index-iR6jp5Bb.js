(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=t(n);fetch(n.href,c)}})();const p="_invalid_pu8ju_1",l={invalid:p},f="https://jsonplaceholder.typicode.com",u={"//":"Mon commentaire",apiBaseUrl:f};async function E(){return await(await fetch(u.apiBaseUrl+"/todos")).json()}async function v(o){return await(await fetch(u.apiBaseUrl+"/todos",{method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json"}})).json()}function m(o){const e=document.createElement("div");e.className="todo-item",e.dataset.todoId=o.id;const t=document.createElement("input");t.type="checkbox",t.className="todo-completed",t.checked=o.completed;const s=document.createElement("span");s.className="todo-title",s.innerText=o.title;const n=document.createElement("button");return n.className="todo-btn-delete",n.innerText="-",e.append(t," ",s," ",n),e}const h=document.querySelector(".todo-form"),d=document.querySelector(".todo-checkall"),r=document.querySelector(".todo-input"),a=document.querySelector(".todo-list");h.addEventListener("submit",async o=>{if(o.preventDefault(),r.classList.remove(l.invalid),!r.value.match(/^[\p{Alphabetic}0-9\- ]+$/u)){r.classList.add(l.invalid);return}const e=await v({title:r.value,completed:!1}),t=m(e);a.prepend(t),r.value="",r.focus()});d.addEventListener("click",()=>{const o=a.querySelectorAll(".todo-completed");for(const e of o)e.checked=d.checked});a.addEventListener("click",o=>{const e=o.target;e.matches(".todo-btn-delete")&&e.closest(".todo-item").remove()});a.addEventListener("dblclick",o=>{const e=o.target;if(e.matches(".todo-title")){const t=document.createElement("input");t.className="todo-title-edit",t.value=e.innerText,e.replaceWith(t)}});a.addEventListener("keydown",o=>{const e=o.target;if(e.matches(".todo-title-edit")&&o.code==="Enter"){const t=document.createElement("span");t.className="todo-title",t.innerText=e.value,e.replaceWith(t)}});window.addEventListener("click",o=>{const e=o.target,t=document.querySelector(".todo-title-edit");if(!t||e===t)return;const s=document.createElement("span");s.className="todo-title",s.innerText=t.value,t.replaceWith(s)});const y=localStorage.getItem("value-todo")??"";r.value=y;r.addEventListener("input",()=>{localStorage.setItem("value-todo",r.value)});async function g(){const o=await E();for(const e of o.slice(0,10)){const t=m(e);a.append(t)}}g();
