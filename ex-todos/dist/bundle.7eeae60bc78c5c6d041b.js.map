{"version":3,"file":"bundle.7eeae60bc78c5c6d041b.js","mappings":"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","sources":["webpack:///./src/todos.js","webpack:///./src/main.js","webpack:///./src/api.js"],"sourcesContent":["/**\r\n * @typedef {object} Todo\r\n * @property {number} todo.id\r\n * @property {string} todo.title\r\n * @property {boolean} todo.completed\r\n */\r\n\r\n/**\r\n * @param {Todo} todo\r\n * @returns {HTMLDivElement}\r\n */\r\nexport function createTodoItem(todo) {\r\n  /*\r\n  <div class=\"todo-item\" data-todo-id=\"123\">\r\n    <input type=\"checkbox\" class=\"todo-completed\">\r\n    <span class=\"todo-title\">Acheter du pain</span>\r\n    <button class=\"todo-btn-delete\">-</button>\r\n  </div>\r\n  */\r\n  const divEl = document.createElement('div');\r\n  divEl.className = \"todo-item\";\r\n  divEl.dataset.todoId = todo.id;\r\n\r\n  const checkboxEl = document.createElement('input');\r\n  checkboxEl.type = 'checkbox';\r\n  checkboxEl.className = 'todo-completed';\r\n  checkboxEl.checked = todo.completed;\r\n\r\n  const spanEl = document.createElement('span');\r\n  spanEl.className = 'todo-title';\r\n  spanEl.innerText = todo.title;\r\n\r\n  const buttonEl = document.createElement('button');\r\n  buttonEl.className = \"todo-btn-delete\";\r\n  buttonEl.innerText = '-';\r\n\r\n  divEl.append(checkboxEl, ' ', spanEl, ' ', buttonEl);\r\n\r\n  return divEl;\r\n}\r\n","import './main.scss';\r\nimport { fetchTodos, postTodo } from \"./api.js\";\r\nimport { createTodoItem } from \"./todos.js\";\r\n\r\n/** @type {HTMLFormElement} */\r\nconst formEl = document.querySelector(\".todo-form\");\r\n\r\n/** @type {HTMLInputElement} */\r\nconst checkboxEl = document.querySelector(\".todo-checkall\");\r\n\r\n/** @type {HTMLInputElement} */\r\nconst inputEl = document.querySelector(\".todo-input\");\r\n\r\n/** @type {HTMLDivElement} */\r\nconst divEl = document.querySelector(\".todo-list\");\r\n\r\nformEl.addEventListener(\"submit\", async (event) => {\r\n  event.preventDefault();\r\n\r\n  // const { createTodoItem } = await import('./todos.js');\r\n  // const { postTodo } = await import('./api.js');\r\n\r\n  inputEl.classList.remove(\"invalid\");\r\n\r\n  if (!inputEl.value.match(/^[\\p{Alphabetic}0-9\\- ]+$/u)) {\r\n    inputEl.classList.add(\"invalid\");\r\n    return;\r\n  }\r\n\r\n  const todo = await postTodo({\r\n    title: inputEl.value,\r\n    completed: false,\r\n  });\r\n\r\n  const todoItemEl = createTodoItem(todo);\r\n  divEl.prepend(todoItemEl);\r\n  inputEl.value = \"\";\r\n  inputEl.focus();\r\n});\r\n\r\ncheckboxEl.addEventListener(\"click\", () => {\r\n  /** @type {NodeListOf<HTMLInputElement>} */\r\n  const completedList = divEl.querySelectorAll(\".todo-completed\");\r\n\r\n  for (const completedEl of completedList) {\r\n    completedEl.checked = checkboxEl.checked;\r\n  }\r\n});\r\n\r\ndivEl.addEventListener(\"click\", (event) => {\r\n  /** @type {HTMLElement} */\r\n  const target = event.target;\r\n\r\n  if (target.matches(\".todo-btn-delete\")) {\r\n    target.closest(\".todo-item\").remove();\r\n  }\r\n});\r\n\r\ndivEl.addEventListener(\"dblclick\", (event) => {\r\n  /** @type {HTMLElement} */\r\n  const target = event.target;\r\n\r\n  if (target.matches(\".todo-title\")) {\r\n    const inputEl = document.createElement(\"input\");\r\n    inputEl.className = \"todo-title-edit\";\r\n    inputEl.value = target.innerText;\r\n    target.replaceWith(inputEl);\r\n  }\r\n});\r\n\r\ndivEl.addEventListener(\"keydown\", (event) => {\r\n  /** @type {HTMLElement} */\r\n  const target = event.target;\r\n\r\n  if (target.matches(\".todo-title-edit\")) {\r\n    if (event.code === \"Enter\") {\r\n      const spanEl = document.createElement(\"span\");\r\n      spanEl.className = \"todo-title\";\r\n      spanEl.innerText = target.value;\r\n\r\n      target.replaceWith(spanEl);\r\n    }\r\n  }\r\n});\r\n\r\nwindow.addEventListener(\"click\", (event) => {\r\n  /** @type {HTMLElement} */\r\n  const target = event.target;\r\n\r\n  const inputEl = document.querySelector(\".todo-title-edit\");\r\n\r\n  if (!inputEl || target === inputEl) {\r\n    return;\r\n  }\r\n\r\n  const spanEl = document.createElement(\"span\");\r\n  spanEl.className = \"todo-title\";\r\n  spanEl.innerText = inputEl.value;\r\n\r\n  inputEl.replaceWith(spanEl);\r\n});\r\n\r\nconst valueFromStorage = localStorage.getItem(\"value-todo\") ?? \"\";\r\ninputEl.value = valueFromStorage;\r\n\r\ninputEl.addEventListener(\"input\", () => {\r\n  localStorage.setItem(\"value-todo\", inputEl.value);\r\n});\r\n\r\nasync function load() {\r\n  const todos = await fetchTodos();\r\n\r\n  for (const todo of todos.slice(0, 10)) {\r\n    const todoItemEl = createTodoItem(todo);\r\n    divEl.append(todoItemEl);\r\n  }\r\n}\r\n\r\nload();\r\n","import config from './config.json';\r\n\r\n/**\r\n * @typedef {object} Todo\r\n * @property {number} todo.id\r\n * @property {string} todo.title\r\n * @property {boolean} todo.completed\r\n */\r\n\r\n/**\r\n * @typedef {object} TodoWithoutId\r\n * @property {string} todo.title\r\n * @property {boolean} todo.completed\r\n */\r\n\r\n/**\r\n * @returns {Promise<Todo[]>}\r\n */\r\nexport async function fetchTodos() {\r\n  const res = await fetch(config.apiBaseUrl + \"/todos\");\r\n  return await res.json();\r\n}\r\n\r\n/**\r\n * @param {TodoWithoutId} todoDto\r\n * @returns {Promise<Todo>}\r\n */\r\nexport async function postTodo(todoDto) {\r\n  const res = await fetch(config.apiBaseUrl + \"/todos\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(todoDto),\r\n    headers: {\r\n      \"Content-type\": \"application/json\",\r\n    },\r\n  });\r\n\r\n  return await res.json();\r\n}\r\n"],"names":["createTodoItem","todo","divEl","document","createElement","className","dataset","todoId","id","checkboxEl","type","checked","completed","spanEl","innerText","title","buttonEl","append","formEl","querySelector","inputEl","addEventListener","async","event","preventDefault","classList","remove","value","match","add","todoItemEl","todoDto","res","fetch","method","body","JSON","stringify","headers","json","postTodo","prepend","focus","completedList","querySelectorAll","completedEl","target","matches","closest","replaceWith","code","window","valueFromStorage","localStorage","getItem","setItem","todos","fetchTodos","slice","load"],"sourceRoot":""}